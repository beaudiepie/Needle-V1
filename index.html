<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Hit-to-Fill Segment Meter (x10)</title>
  <style>
    :root{
      --bg: #0f1115;
      --panel: #151924;
      --panel-2: #0c0f16;
      --text: #e8ecf2;
      --muted: #a3acc2;
      --accent: #6ecbff;
      --segment-off: #242a3a;
      --segment-on: #9fdcff;
      --glow: 0 0 20px var(--accent), 0 0 40px var(--accent, #6ecbff);
    }
    *{box-sizing:border-box}
    body{
      margin:0; padding:24px; font-family:Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      background: radial-gradient(1200px 800px at 20% -10%, #1a2031 0%, var(--bg) 50%);
      color:var(--text);
    }
    .app{max-width:900px; margin:0 auto; display:grid; gap:20px}
    header{display:flex; align-items:center; justify-content:space-between; gap:16px}
    h1{font-size:20px; margin:0; font-weight:700; letter-spacing:0.2px}
    .sub{color:var(--muted); font-size:13px}

    .board{display:grid; grid-template-columns:1fr 380px; gap:20px}
    @media (max-width: 920px){.board{grid-template-columns:1fr}}

    .card{background:linear-gradient(180deg, var(--panel), var(--panel-2)); border:1px solid #20263a; border-radius:16px; padding:18px; box-shadow: 0 10px 30px rgba(0,0,0,0.25)}

    .meter-wrap{display:grid; gap:14px}
    .meter-label{display:flex; align-items:center; justify-content:space-between}
    .meter-label b{font-size:14px}
    .meter{
      --seg: 10;
      display:grid; grid-template-columns: repeat(var(--seg), 1fr); gap:10px; 
      padding:14px; background:#0b0e16; border-radius:14px; border:1px solid #1b2133;
    }
    .segment{
      height:64px; border-radius:12px; position:relative; overflow:hidden;
      background:linear-gradient(180deg, #1a2132, #0f1320);
      border:1px solid #232a42;
      box-shadow: inset 0 3px 12px rgba(0,0,0,0.5);
    }
    .segment::after{
      content:""; position:absolute; inset:2px; border-radius:10px;
      background:linear-gradient(180deg, var(--segment-off), #1a2032);
      transition: transform 140ms ease, background 220ms ease, box-shadow 220ms ease;
      transform: scaleY(0.06); transform-origin: bottom;
    }
    .segment.filled::after{
      background: linear-gradient(180deg, var(--segment-on), var(--accent));
      transform: scaleY(1);
      box-shadow: var(--glow);
      animation: breathe 1.2s ease-in-out 1;
    }
    @keyframes breathe{0%{ box-shadow:none }50%{ box-shadow: 0 0 10px var(--accent) }100%{ box-shadow: var(--glow) }}

    .controls{display:flex; flex-wrap:wrap; gap:10px}
    button, select{
      background:#0e1424; color:var(--text); border:1px solid #24304d; padding:10px 14px; border-radius:12px; font-weight:600; cursor:pointer; 
    }
    select{cursor:pointer}
    button:active{ transform: translateY(1px) }
    .hit{background: radial-gradient(200px 180px at 50% -40%, rgba(255,255,255,0.05), transparent 60%), #0e1424; border-color:#30426a;}
    .hit.glow{ box-shadow: var(--glow) }

    .counter{font-size:13px; color:var(--muted)}

    .field{
      height:260px; border-radius:16px; border:1px dashed #2b3554; display:grid; place-items:center; position:relative;
      background: repeating-radial-gradient(circle at 20% 30%, #0b0e16, #0b0e16 14px, #0f1424 15px, #0f1424 30px);
    }
    .field .label{font-weight:800; letter-spacing:2px; text-transform:uppercase; color:#93a1bd; opacity:0.8}
    .field::after{
      content:""; position:absolute; inset:0; border-radius:16px; pointer-events:none; filter: blur(10px); opacity:0; transition:opacity .25s ease;
      background: radial-gradient(60% 70% at 50% 50%, var(--accent) 0%, transparent 60%);
    }
    .field.glow::after{ opacity:0.85; animation: pulse 900ms ease-in-out 4 }
    @keyframes pulse{0%,100%{ opacity:0.25 }50%{ opacity:0.95 }}

    .badge{display:inline-flex; align-items:center; gap:8px; font-size:12px; color:#a3acc2}
    .dot{width:10px; height:10px; border-radius:50%; background:var(--accent); box-shadow:0 0 10px var(--accent)}

    .row{display:flex; align-items:center; justify-content:space-between}
  </style>
</head>
<body>
  <div class="app">
    <header>
      <div>
        <h1>Segment Energy Meter (x10)</h1>
        <div class="sub">Press <em>Hit</em> to fill segments. If you stop hitting, energy drains. On 10, the field glows then resets.</div>
      </div>
      <div class="badge"><span class="dot"></span> Assigned color</div>
    </header>

    <div class="board">
      <section class="card">
        <div class="meter-wrap">
          <div class="meter-label row">
            <b>Energy</b>
            <div class="counter"><span id="count">0</span> / 10</div>
          </div>
          <div id="meter" class="meter"></div>
        </div>

        <div style="height:16px"></div>

        <div class="controls">
          <button id="hit" class="hit">ðŸ”¨ Hit</button>
          <button id="dec">âˆ’</button>
          <button id="reset">Reset</button>
          <label style="display:inline-flex; align-items:center; gap:8px; margin-left:auto">
            Color:
            <select id="color">
              <option value="#6ecbff">Ice Blue</option>
              <option value="#7df8d3">Mint</option>
              <option value="#ffd166">Amber</option>
              <option value="#ff6ec7">Candy Pink</option>
              <option value="#a98bff">Violet</option>
              <option value="#63ff5b">Lime</option>
              <option value="#ff6a5b">Coral</option>
            </select>
          </label>
        </div>
      </section>

      <section class="card">
        <div class="row">
          <b>Field Response</b>
          <div class="counter">Glows when meter hits 10</div>
        </div>
        <div style="height:12px"></div>
        <div id="field" class="field"><div class="label">Candy Field</div></div>
      </section>
    </div>
  </div>

  <script>
    const meter = document.getElementById('meter');
    const countEl = document.getElementById('count');
    const hitBtn = document.getElementById('hit');
    const decBtn = document.getElementById('dec');
    const resetBtn = document.getElementById('reset');
    const field = document.getElementById('field');
    const color = document.getElementById('color');

    const SEGMENTS = 10;
    const segments = [];
    for(let i=0;i<SEGMENTS;i++){
      const s = document.createElement('div');
      s.className = 'segment';
      meter.appendChild(s);
      segments.push(s);
    }

    let value = 0;
    let drainInterval = null;

    function setAccent(hex){
      document.documentElement.style.setProperty('--accent', hex);
      document.documentElement.style.setProperty('--segment-on', hex);
    }

    function updateView(){
      segments.forEach((s, i)=>{
        s.classList.toggle('filled', i < value);
      });
      countEl.textContent = value;
      hitBtn.classList.toggle('glow', value > 0 && value < SEGMENTS);
    }

    function startDrain(){
      if(drainInterval) return;
      drainInterval = setInterval(()=>{
        if(value > 0){
          value--;
          updateView();
        }
      }, 1600); // slowed down by half
    }

    function stopDrain(){
      clearInterval(drainInterval);
      drainInterval = null;
    }

    function bump(delta){
      const next = Math.max(0, Math.min(SEGMENTS, value + delta));
      if(next === value) return;
      value = next;
      updateView();
      if(value >= SEGMENTS){
        field.classList.add('glow');
        stopDrain();
        setTimeout(()=>{
          field.classList.remove('glow');
          value = 0;
          updateView();
          startDrain();
        }, 2000);
      }
    }

    hitBtn.addEventListener('click', ()=> bump(1));
    decBtn.addEventListener('click', ()=> bump(-1));
    resetBtn.addEventListener('click', ()=>{ value = 0; updateView(); });
    color.addEventListener('change', (e)=> setAccent(e.target.value));

    setAccent(color.value);
    updateView();
    startDrain();
  </script>
</body>
</html>
